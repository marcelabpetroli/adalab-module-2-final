"use strict";const contentResultsElement=document.querySelector(".js_content_results"),contentFavElement=document.querySelector(".js_content_fav"),searchInputElement=document.querySelector(".js_input"),btnSearch=document.querySelector(".js_search_btn");let favorites=[],characters=[];function handleClick(e){e.preventDefault();const t=searchInputElement.value;contentResultsElement.innerHTML="";renderAll(characters.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())),contentResultsElement)}function renderAll(e,t){e.forEach(e=>{let n="";n=-1===favorites.findIndex(t=>t.char_id===e.char_id)?"":"selected";const r=renderTemplate(e,n),a=document.createElement("li");a.setAttribute("class","list-element"),a.appendChild(r),t.appendChild(a)})}function renderFavorites(e,t){const n=document.createElement("button"),r=document.createTextNode("Reset All");n.appendChild(r),n.setAttribute("class","reset-favorites-btn"),t.appendChild(n),n.addEventListener("click",resetFavorites),e.forEach(e=>{let n="";n=-1===favorites.findIndex(t=>t.char_id===e.char_id)?"":"selected";const r=renderTemplate(e,n),a=document.createElement("li"),s=document.createElement("button"),c=document.createElement("i");a.setAttribute("class","list-element"),s.setAttribute("class","delete-btn"),c.setAttribute("class","fa-solid fa-trash-can"),s.appendChild(c),r.appendChild(s),a.appendChild(r),t.appendChild(a)})}function renderTemplate(e,t){const n=document.createElement("article"),r=document.createElement("div"),a=document.createElement("img"),s=document.createElement("h3"),c=document.createElement("p"),l=document.createTextNode(e.name),i=document.createTextNode(e.status);return n.setAttribute("class","js_characters article-character "+t),n.setAttribute("id",e.char_id),c.setAttribute("class","status"),r.setAttribute("class","image-container"),a.setAttribute("src",e.img),a.setAttribute("alt",e.name),a.setAttribute("title",e.name),a.setAttribute("class","image-characters"),s.appendChild(l),c.appendChild(i),r.appendChild(a),n.appendChild(r),n.appendChild(s),n.appendChild(c),n.addEventListener("click",handleClickCharacter),n}function handleClickCharacter(e){e.currentTarget.classList.toggle("selected");const t=characters.find(t=>t.char_id===parseInt(e.currentTarget.id)),n=favorites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===n?(favorites.push(t),localStorage.setItem("favoriteCharacters",JSON.stringify(favorites))):(favorites.splice(n,1),localStorage.setItem("favoriteCharacters",JSON.stringify(favorites))),contentResultsElement.innerHTML="",renderAll(characters,contentResultsElement),contentFavElement.innerHTML="",renderFavorites(favorites,contentFavElement)}function resetFavorites(e){e.preventDefault(),contentFavElement.innerHTML="",favorites=[],localStorage.removeItem("favoriteCharacters"),contentResultsElement.innerHTML="",renderAll(characters,contentResultsElement)}fetch("./assets/data/data.json").then(e=>e.json()).then(e=>{characters=e,renderAll(characters,contentResultsElement)});const savedInFavorites=JSON.parse(localStorage.getItem("favoriteCharacters"));null!==savedInFavorites&&(favorites=savedInFavorites,renderFavorites(favorites,contentFavElement)),btnSearch.addEventListener("click",handleClick);